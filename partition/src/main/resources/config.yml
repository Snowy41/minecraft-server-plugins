# Partition Plugin Configuration
# Tailored for your server with FastAsyncWorldEdit, FastAsyncVoxelSniper, etc.

# ===== ISOLATION SETTINGS =====
isolation:
  chat: true
  tablist: true
  commands: false
  world-border: true

# ===== PARTITIONS =====
partitions:
  # ===== BUILD SERVER =====
  # Full building environment with both async plugins
  build:
    name: "Build Server"
    description: "Main building environment with all tools"
    enabled: true

    # Your existing build worlds
    worlds:
      - "world"
      - "world_nether"
      - "world_the_end"

    # Plugins for builders - EXACT names from /plugins command
    plugins:
      - "CorePlugin"                    # Your core infrastructure
      - "LobbyPlugin"                   # Your lobby system
      - "PartitionPlugin"               # This plugin itself
      - "FastAsyncWorldEdit"            # From FastAsyncWorldEdit-Paper-2.14.3-SNAPSHOT-1231.jar
      - "fastasyncvoxelsniper"          # From fastasyncvoxelsniper-3.2.3.jar
      # ↑ IMPORTANT: Use EXACT names from /plugins command!
      #    Run /plugins in-game to verify these names

    # Spawn location (from your lobby-plugin config)
    spawn-world: "world"
    spawn-location:
      x: -174.5
      y: -45.0
      z: -13.5
      yaw: 0.0
      pitch: 0.0

    auto-load: true
    persistent: true

  # ===== DEV SERVER =====
  # Testing environment - MINIMAL plugins
  dev:
    name: "Dev Server"
    description: "Testing environment for plugin updates"
    enabled: true

    # Dev worlds (will be auto-created if missing)
    worlds:
      - "dev_world"
      - "dev_world_nether"
      - "dev_world_the_end"

    # Minimal plugin set for dev
    plugins:
      - "CorePlugin"                    # Always needed
      - "LobbyPlugin"                   # Always needed
      - "PartitionPlugin"               # Always needed
      # ↑ NO building plugins here by default!
      #   This is where you test NEW plugins before enabling in build

    # Dev spawn (will use default coords when world is created)
    spawn-world: "dev_world"
    spawn-location:
      x: 0.5
      y: 64.0
      z: 0.5
      yaw: 0.0
      pitch: 0.0

    auto-load: true
    persistent: true

  # ===== LOBBY (REQUIRED) =====
  # Safe zone for players during partition restarts
  lobby:
    name: "Lobby"
    description: "Main lobby - safe zone for restarts"
    enabled: true

    worlds:
      - "world"  # Can reuse main world as lobby

    plugins:
      - "CorePlugin"
      - "LobbyPlugin"
      - "PartitionPlugin"

    spawn-world: "world"
    spawn-location:
      x: -174.5  # Your lobby spawn
      y: -45.0
      z: -13.5
      yaw: 0.0
      pitch: 0.0

    auto-load: true
    persistent: true

# ===== USAGE EXAMPLES =====
#
# Example 1: Testing WorldEdit update in dev
# ----------------------------------------
# 1. Add WorldEdit to dev partition:
#
#    dev:
#      plugins:
#        - "CorePlugin"
#        - "LobbyPlugin"
#        - "PartitionPlugin"
#        - "FastAsyncWorldEdit"  # ← Add this
#
# 2. Reload config: /partition reload
# 3. Restart dev: /partition restart dev
# 4. WorldEdit now loads ONLY in dev!
# 5. Builders in build partition: unaffected
#
# Example 2: Testing your own plugin
# ----------------------------------
# 1. Build your plugin: ./gradlew :your-plugin:shadowJar
# 2. Copy JAR to plugins/ folder
# 3. Add to dev config:
#
#    dev:
#      plugins:
#        - "CorePlugin"
#        - "LobbyPlugin"
#        - "PartitionPlugin"
#        - "YourPlugin"  # ← Your new plugin
#
# 4. Reload config: /partition reload
# 5. Restart dev: /partition restart dev
# 6. Test your plugin in dev world
# 7. Builders keep working in build world!
#
# Example 3: Deploying stable plugin to build
# -------------------------------------------
# 1. After testing in dev, add to build:
#
#    build:
#      plugins:
#        - "CorePlugin"
#        - "LobbyPlugin"
#        - "PartitionPlugin"
#        - "FastAsyncWorldEdit"
#        - "fastasyncvoxelsniper"
#        - "YourPlugin"  # ← Now in production!
#
# 2. Schedule a restart window
# 3. Restart build: /partition restart build
# 4. Plugin now live for builders

# ===== IMPORTANT NOTES =====
#
# 1. PLUGIN NAMES MUST MATCH /plugins OUTPUT
#    Run this in-game: /plugins
#    You should see: CorePlugin, LobbyPlugin, PartitionPlugin,
#                    FastAsyncWorldEdit, fastasyncvoxelsniper
#    ↑ Use these EXACT names (case-sensitive!)
#
# 2. LOBBY PARTITION IS REQUIRED
#    The system needs a safe place to move players during restarts.
#    If you don't have a lobby partition, restarts will fail!
#
# 3. WORLD AUTO-CREATION
#    Missing worlds (like dev_world) are created automatically.
#    No manual setup needed!
#
# 4. HOT-RELOAD WORKFLOW
#    Build partition = Stable, rarely restarted
#    Dev partition = Testing ground, restarted often
#    Lobby partition = Safe zone, never restarted
#
# 5. ZERO DOWNTIME
#    /partition restart dev → Only dev partition restarts
#    Build partition → Continues running normally
#    Builders → Never interrupted!

# ===== COMMANDS REFERENCE =====
#
# /partition list              - View all partitions
# /partition info build        - Details about build partition
# /partition info dev          - Details about dev partition
# /partition tp build          - Go to build server
# /partition tp dev            - Go to dev server
# /partition restart dev       - Hot-reload dev partition
# /partition return            - Return after restart
# /partition worlds            - View world mappings
# /partition plugins build     - View plugins in build
# /partition plugins dev       - View plugins in dev
# /partition reload            - Reload this config